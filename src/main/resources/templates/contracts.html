<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <title>Контракты</title>
    <link rel="stylesheet" href="/css/styles.css"> <!-- Подключите стили -->
    <script>
        function openModal(modalId) {
            document.getElementById(modalId).style.display = "block";
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }
    </script>
</head>
<body>
<!-- Подключение навбара -->
<div th:replace="navbar.html :: navbar"></div>

<main>
    <h1>Контракты</h1>
    <table border="1">
        <thead>
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Статус</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        <!-- Динамическая загрузка контрактов -->
        <tr th:each="contract : ${contracts}">
            <td th:text="${contract.id}"></td>
            <td th:text="${contract.name}"></td>
            <td th:text="${contract.status}"></td>
            <td>
                <button onclick="openModal('editModal')">Редактировать</button>
                <button onclick="openModal('deleteModal')">Удалить</button>
            </td>
        </tr>
        </tbody>
    </table>
    <button onclick="openModal('addModal')">Добавить контракт</button>
</main>

<!-- Модальное окно для добавления -->
<div id="addModal" class="modal" style="display: none;">
    <form th:action="@{/contracts/add}" method="post">
        <h2>Добавить контракт</h2>
        <label>Название: <input type="text" name="name" required></label><br>
        <label>Статус:
            <select name="status">
                <option value="ACTIVE">Активен</option>
                <option value="COMPLETED">Завершён</option>
                <option value="TERMINATED">Расторгнут</option>
            </select>
        </label><br>
        <button type="submit">Сохранить</button>
        <button type="button" onclick="closeModal('addModal')">Отмена</button>
    </form>
</div>

<!-- Модальное окно для редактирования -->
<div id="editModal" class="modal" style="display: none;">
    <form th:action="@{/contracts/edit}" method="post">
        <h2>Редактировать контракт</h2>
        <input type="hidden" name="id" th:value="${contract.id}">
        <label>Название: <input type="text" name="name" th:value="${contract.name}" required></label><br>
        <label>Статус:
            <select name="status" th:value="${contract.status}">
                <option value="ACTIVE">Активен</option>
                <option value="COMPLETED">Завершён</option>
                <option value="TERMINATED">Расторгнут</option>
            </select>
        </label><br>
        <button type="submit">Сохранить</button>
        <button type="button" onclick="closeModal('editModal')">Отмена</button>
    </form>
</div>

<!-- Модальное окно для удаления -->
<div id="deleteModal" class="modal" style="display: none;">
    <form th:action="@{/contracts/delete}" method="post">
        <h2>Удалить контракт</h2>
        <input type="hidden" name="id" th:value="${contract.id}">
        <p>Вы уверены, что хотите удалить этот контракт?</p>
        <button type="submit">Да</button>
        <button type="button" onclick="closeModal('deleteModal')">Нет</button>
    </form>
</div>
</body>
</html>
